const _0x425344=_0x43c4;(function($,x){let e=_0x43c4,t=$();for(;;)try{let a=-parseInt(e(536))/1+parseInt(e(531))/2*(parseInt(e(373))/3)+parseInt(e(376))/4+parseInt(e(408))/5+parseInt(e(503))/6+-parseInt(e(534))/7+-parseInt(e(412))/8*(parseInt(e(548))/9);if(239155===a)break;t.push(t.shift())}catch(o){t.push(t.shift())}})(_0x454e,239155),emailjs.init(_0x425344(433));const WHATSAPP_URL=_0x425344(387),MARQUEE_TEXT=_0x425344(600),ITEMPESOS="6";firebase.initializeApp(firebaseConfig);const db=firebase.database();document.addEventListener(_0x425344(322),function(){let $=_0x425344,x=document[$(518)]($(330)),e=x?x[$(411)]($(598)):[],t=0;e[$(337)]>0&&setInterval(()=>{t=(t+1)%e.length,function a(){let o=$;if(x&&e[o(337)]>0){let i=-(100*t);x[o(435)][o(462)]=o(377)+i+"%)"}}()},5e3)});const ITEMS_PER_PAGE=30;let productos=[],datosFiltrados=[],currentPage=1,carrito=[],currentLightboxImages=[],currentImageIndex=0,datosExtraCliente={};function guardarCarritoLocal(){let $=_0x425344;if(!modoEdicion)try{localStorage[$(569)]($(619),JSON[$(424)](carrito))}catch(x){console.error($(360),x)}}function cargarCarritoLocal(){let $=_0x425344;if(!modoEdicion)try{let x=localStorage[$(506)]("carritoMayorista");x&&(carrito=JSON[$(522)](x),actualizarCarrito())}catch(e){console[$(496)]($(367),e),carrito=[]}}const urlParams=new URLSearchParams(window.location.search),pedidoEditId=urlParams.get("pedido"),modoEdicion=!!pedidoEditId;if(modoEdicion){localStorage[_0x425344(379)]("carritoMayorista");let $=document.createElement(_0x425344(578));$[_0x425344(356)]=_0x425344(429)+pedidoEditId,$.id="aviso-edicion-pedido",$[_0x425344(435)][_0x425344(557)]=_0x425344(552),document[_0x425344(591)][_0x425344(483)]($),document[_0x425344(591)][_0x425344(435)][_0x425344(381)]=_0x425344(544),db[_0x425344(446)](_0x425344(485)+pedidoEditId)[_0x425344(436)]("value").then($=>{let x=_0x425344;if($[x(440)]()){let e=$[x(364)]();datosExtraCliente=e[x(525)]||{},console.log("Datos del pedido existente cargados:",e)}})[_0x425344(392)]($=>{let x=_0x425344;console[x(496)](x(493),$)})}const loadingOverlay=document[_0x425344(518)](_0x425344(357));fetch(_0x425344(571)+GOOGLE_SHEETS_CONFIG[_0x425344(401)]+_0x425344(566)+GOOGLE_SHEETS_CONFIG[_0x425344(395)]+"?key="+GOOGLE_SHEETS_CONFIG[_0x425344(329)])[_0x425344(617)]($=>{let x=_0x425344;if(!$.ok)throw Error("Error al acceder a la API: "+$[x(590)]);return $[x(428)]()}).then($=>{let x=_0x425344;loadingOverlay&&(loadingOverlay.style[x(501)]=x(358));let e=$[x(332)];if(!e||0===e[x(337)])throw Error(x(511));datosFiltrados=productos=e.filter($=>""!==($[3]||"")[x(399)]()[x(583)]())[x(383)](($,x)=>{function e($){let x=_0x43c4;if(!$||""===$||null==$)return new Date(1900,0,1);if($.includes("/")){let e=$[x(452)]("/");if(3===e[x(337)]){let t=parseInt(e[0]),a=parseInt(e[1])-1,o=parseInt(e[2]);return new Date(o,a,t)}}return new Date(1900,0,1)}let t=e($[12]),a=e(x[12]);return a-t}),window[x(404)](0,0),mostrarPagina(1),setTimeout(()=>{let $=x;refreshStockInfo(),document.getElementById("filtroDisponibles")[$(421)]&&i(),setTimeout(()=>{primeraCarga=!1},100)},100);let t=new Set(productos.map($=>$[0])),a=document[x(518)](x(417)),o=Array[x(413)](t)[x(549)]($=>$&&""!==$[x(583)]())[x(383)](($,e)=>$[x(513)](e,"es",{sensitivity:x(482)}));function i(){let $=x,e=document[$(518)]($(417))[$(588)],t=document[$(518)]($(507))[$(588)][$(490)](),a=document[$(518)]($(366)).checked,o=productos;"todos"!==e&&(o=o[$(549)]($=>$[0]===e)),""!==t[$(583)]()&&(o=o[$(549)](x=>x[3][$(490)]()[$(498)](t)||x[2].toLowerCase()[$(498)](t)||x[17]&&x[17][$(490)]()[$(498)](t))),a&&(o=o[$(549)]($=>{let x=$[10];if(null==x||""===x)return!1;let e=parseInt(String(x).trim());return!isNaN(e)&&e>1})),datosFiltrados=o,mostrarPagina(1,o)}o[x(326)]($=>{let e=x,t=document.createElement(e(595));t[e(588)]=$,t[e(356)]=$,a[e(483)](t)}),a[x(538)](x(481),()=>{i()}),document.getElementById(x(507))[x(538)](x(319),$=>{i()}),document[x(518)](x(366)).addEventListener("change",()=>{i()}),document.getElementById(x(405))[x(538)]("click",()=>{let $=x;document[$(518)]($(417)).value="todos",document[$(518)]("buscar").value="",document[$(518)]($(366)).checked=!1,datosFiltrados=productos,mostrarPagina(1)})})[_0x425344(392)]($=>{let x=_0x425344;loadingOverlay&&(loadingOverlay[x(435)][x(501)]=x(358)),console.error("Error al cargar los datos:",$),document.querySelector(x(560))[x(356)]=$[x(562)]});let primeraCarga=!0;function mostrarPagina($,x=productos){let e=_0x425344;currentPage=$,x[e(337)];let t=($-1)*30,a=x.slice(t,t+30);cargarGrid(a),actualizarPaginacion($,x),document[e(393)]!==document[e(518)](e(507))&&setTimeout(()=>{let $=e;if(primeraCarga)window[$(404)]({top:0,behavior:$(604)});else{let x=document.getElementById($(417));if(x){let t=x[$(517)](),a=window[$(386)]||document[$(463)][$(572)];window[$(404)]({top:t.top+a-20,behavior:$(510)})}}},0)}function cargarGrid($){let x=_0x425344,e=document.getElementById("catalogo");e[x(353)]="",$.forEach($=>{let t=x,a=document[t(526)](t(578));a[t(576)][t(342)](t(551));let o=document[t(526)](t(319));o.type=t(587),o[t(588)]=$[2],a.appendChild(o);let i=$[14]||"",r=$[15]||"";if(i||r){let _=document[t(526)](t(578));_[t(576)][t(342)](t(375)),_[t(353)]=t(556),_[t(489)]="Ver informaci\xf3n adicional",_[t(538)](t(612),()=>{mostrarInfoModal($[3],i,r)}),a[t(483)](_)}if(isValidImageUrl($[1])){let n=[];-1!==$[1][t(437)](",")?n=$[1][t(452)](",").map($=>$.trim()):n[t(540)]($[1]);let d=document[t(526)]("img");d.src=n[0],d[t(352)]=t(396),d.onerror=function(){let $=t;this[$(451)]=$(570)},d.addEventListener("click",()=>{abrirLightbox(n)}),a[t(483)](d)}let l=document[t(526)]("h3");l[t(356)]=$[3],a[t(483)](l);let s=document.createElement(t(578));s[t(576)][t(342)](t(324)),s.textContent=t(438)+$[2],a.appendChild(s);let c=document[t(526)](t(578));c.classList[t(342)](t(535)),c[t(435)].margin=t(554),c.style[t(354)]=t(465);let f=0;void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(f=parseInt($[10])),isNaN(f)?c[t(353)]=t(474):f<=1?c[t(353)]='<span style="color: #ff9800;">✗ Sin stock</span>':f<=10?c[t(353)]=t(410):c[t(353)]=t(347),a[t(483)](c);{let u=document[t(526)]("p");u[t(353)]=t(397)+$[13]+"</s></span>",u[t(435)][t(346)]=t(480),a[t(483)](u)}let b=document[t(526)]("p");b[t(353)]="<strong>Ahora $</strong> "+$["6"],b.style.marginTop=t(579),a[t(483)](b);let m=document[t(526)]("div");m.style[t(501)]=t(559),m[t(435)].alignItems="center",m[t(435)][t(426)]=t(504),m.style[t(420)]=t(480),m[t(435)][t(340)]="50px";let p=document[t(526)]("div");p[t(435)][t(501)]=t(358),p.style.alignItems=t(504),p[t(435)][t(420)]=t(480),p[t(435)][t(599)]="all 0.3s ease",p[t(435)].opacity="0";let g=document[t(526)]("button");g[t(353)]="-",g[t(435)][t(473)]=t(468),g.style[t(567)]=t(348),g[t(435)].height="35px",g.style[t(406)]="35px",g[t(435)][t(577)]="#ff9800",g[t(435)].color=t(607),g[t(435)].border="1px solid #ff9800",g[t(435)][t(350)]=t(355),g.style[t(611)]=t(613);let E=document[t(526)](t(319));E.type=t(431),E[t(529)]="1",E[t(588)]="1",E[t(435)][t(406)]=t(320),E[t(435)][t(328)]=t(432),E[t(435)][t(473)]=t(480),E[t(435)][t(582)]=t(504),E[t(435)][t(361)]=t(456),E[t(435)][t(350)]=t(355);let h=document.createElement(t(575));h[t(353)]="+",h[t(435)][t(473)]=t(468),h.style[t(567)]=t(348),h.style[t(328)]="35px",h[t(435)].width="35px",h.style[t(577)]=t(448),h[t(435)].color=t(607),h[t(435)].border="1px solid #ff9800",h.style[t(350)]=t(355),h[t(435)].cursor=t(613),p[t(483)](g),p[t(483)](E),p[t(483)](h);let y=document[t(526)](t(575));function v(){let x=t,e=parseInt(E[x(588)]);if(e>0){let a=carrito[x(398)]($=>$.nombre===l[x(356)]);a?a[x(363)]=e:agregarAlCarrito(l[x(356)],$[6],e,$[2],$[0],$[7][x(399)]()[x(602)](/[,\.]/g,""),$[6][x(399)]().replace(/[,\.]/g,"")),actualizarCarrito()}}y[t(353)]='<i class="fas fa-cart-plus"></i>',y.style[t(473)]=t(547),y[t(435)][t(567)]="16px",y[t(435)][t(328)]=t(320),y.style[t(406)]=t(320),y[t(435)][t(577)]=t(441),y.style[t(558)]=t(607),y[t(435)][t(361)]=t(487),y.style[t(350)]=t(355),y[t(435)].cursor=t(613),y.style[t(599)]=t(442),y[t(576)][t(342)]("btn-agregar-carrito"),!isNaN(f)&&f>0?(E[t(430)]=f,E[t(489)]="M\xe1ximo "+f+t(403)):(y[t(321)]=!0,y[t(435)][t(577)]=t(580),y[t(435)][t(450)]=t(580),y.style.cursor=t(586),y[t(489)]=t(553)),y[t(538)](t(612),()=>{let x=t,e=0;if(void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(e=parseInt($[10])),isNaN(e)||e<=0){alert(x(494));return}E[x(588)]="1",v(),function $(){let x=t;y.style[x(394)]="0",y.style[x(462)]="scale(0.8)",setTimeout(()=>{let $=x;y[$(435)][$(501)]=$(358),p[$(435)][$(501)]=$(559),setTimeout(()=>{let x=$;p.style[x(394)]="1",p[x(435)][x(462)]=x(479)},50)},150)}()}),h.addEventListener(t(612),()=>{let x=t,e=0;void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(e=parseInt($[10]));let a=parseInt(E.value);if(!isNaN(e)&&a>=e){alert("Stock insuficiente. Solo hay "+e+x(539));return}E[x(588)]=a+1,v()}),g[t(538)]("click",()=>{let $=t,x=parseInt(E[$(588)]);if(x>1)E.value=x-1,v();else{let e=carrito[$(398)](x=>x[$(546)]===l[$(356)]);if(e){let a=carrito[$(437)](e);carrito[$(390)](a,1),actualizarCarrito()}p[$(435)][$(394)]="0",p[$(435)][$(462)]="scale(0.8)",setTimeout(()=>{let x=$;p[x(435)].display=x(358),y[x(435)][x(501)]=x(495),y[x(435)].opacity="0",y.style.transform="scale(0.8)",setTimeout(()=>{let $=x;y.style[$(394)]="1",y[$(435)][$(462)]=$(479)},50)},150)}}),E[t(538)](t(481),()=>{let x=t,e=parseInt(E[x(588)]),a=0;void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(a=parseInt($[10])),e<=0?E[x(588)]="1":!isNaN(a)&&e>a&&(alert("Stock insuficiente. Solo hay "+a+" unidades disponibles."),E[x(588)]=a),v()}),m[t(483)](y),m.appendChild(p),a[t(483)](m),e.appendChild(a)})}function refreshStockInfo(){let $=_0x425344,x=document.querySelectorAll($(621));x[$(326)](x=>{let e=$,t=x[e(418)](e(581));if(t){let a=x[e(418)](e(343));if(a){let o=a[e(588)],i=productos[e(398)]($=>$[2]===o),r=0;i&&void 0!==i[10]&&null!==i[10]&&""!==i[10]&&(r=parseInt(i[10])),isNaN(r)?t[e(353)]=e(474):r<=1?t[e(353)]=e(474):r<=10?t[e(353)]='<span style="color: #ffeb3b;">⚠ Pocas unidades</span>':t[e(353)]='<span style="color: #4CAF50;">✓ Disponible</span>';let _=x[e(418)](e(369)),n=x[e(418)](e(563));_&&(!isNaN(r)&&r>0?(_[e(430)]=r,_[e(321)]=!1,_.title=e(561)+r+e(403),n&&n.disabled&&(n[e(321)]=!1,n.style[e(577)]=e(441),n[e(435)][e(450)]=e(441),n[e(435)][e(611)]="pointer",n.title="")):(_[e(321)]=!0,_[e(489)]="Sin stock disponible",n&&(n[e(321)]=!0,n[e(435)][e(577)]=e(580),n.style[e(450)]="#cccccc",n[e(435)][e(611)]=e(586),n.title=e(553))))}}})}function agregarAlCarrito($,x,e,t,a){let o=_0x425344,i=carrito.find(x=>x[o(546)]===$);i?i[o(363)]+=e:carrito.push({nombre:$,precio:x,cantidad:e,codigo:t,categoria:a}),actualizarCarrito(),guardarCarritoLocal()}function getMaxVisiblePaginationButtons(){let $=_0x425344,x=document[$(518)]("pagination"),e=window[$(455)];x&&(e=x.offsetWidth||e);let t=Math[$(430)](3,Math[$(609)]((e-220)/48));return Math[$(529)](t,15)}function actualizarPaginacion($,x){let e=_0x425344,t=document[e(518)](e(615));t[e(353)]="";let a=Math[e(499)](x[e(337)]/30);if($>1){let o=document[e(526)]("button");o[e(356)]=e(542),o[e(435)][e(406)]="100px",o[e(538)]("click",()=>mostrarPagina($-1,x)),t.appendChild(o)}let i=getMaxVisiblePaginationButtons(),r=Math.max(1,$-Math[e(609)](i/2)),_=Math[e(529)](a,r+i-1);_-r<i-1&&(r=Math[e(430)](1,_-i+1));for(let n=r;n<=_;n++){let d=document.createElement(e(575));d[e(356)]=n,d[e(576)][e(342)](e(555)),n===$&&d[e(576)][e(342)](e(459)),d[e(538)]("click",()=>mostrarPagina(n,x)),t[e(483)](d)}if($<a){let l=document[e(526)](e(575));l[e(356)]=e(336),l[e(435)][e(406)]=e(460),l.addEventListener(e(612),()=>mostrarPagina($+1,x)),t.appendChild(l)}}function isValidImageUrl($){return $&&$[_0x425344(592)](/\.(jpeg|jpg|gif|png)$/i)}function abrirLightbox($){let x=_0x425344;currentLightboxImages=$,currentImageIndex=0,document[x(518)](x(594))[x(451)]=currentLightboxImages[currentImageIndex],document[x(518)]("lightbox")[x(435)][x(501)]=x(559),actualizarBotonesLightbox()}function actualizarBotonesLightbox(){let $=_0x425344,x=document[$(518)]($(443)),e=document[$(518)]($(537));currentLightboxImages[$(337)]>1?(x.style[$(501)]=$(495),e[$(435)].display="block"):(x[$(435)][$(501)]="none",e[$(435)].display=$(358))}function closeLightbox($){let x=_0x425344;($.target===$[x(461)]||$[x(601)][x(576)][x(472)](x(574)))&&(document.getElementById("lightbox")[x(435)][x(501)]=x(358))}function mostrarInfoModal($,x,e){let t=_0x425344,a=document[t(518)](t(545)),o=document[t(518)]("infoModalTitle"),i=document[t(518)](t(608));o[t(356)]=$;let r="";x&&""!==x[t(583)]()&&(r+='\n            <div class="info-modal-section">\n                <h4>Especificaciones del Fabricante:</h4>\n                <p>'+x+"</p>\n            </div>\n        "),e&&""!==e[t(583)]()&&(r+=t(464)+e+t(371)),i[t(353)]=r,a[t(576)][t(342)](t(524))}function closeInfoModal($){let x=_0x425344,e=document[x(518)](x(545));$&&$.target!==$[x(461)]||e.classList.remove(x(524))}function actualizarCarrito(){let $=_0x425344,x=document[$(518)]($(514)),e=document.getElementById($(453)),t=document.getElementById($(484));x[$(353)]="";let a=carrito[$(516)]((x,e)=>x+e[$(363)],0);if(0===carrito[$(337)]){e&&(e[$(435)].display=$(358));let o=document[$(518)]("cartContainer");o&&(o.classList[$(416)]($(459)),typeof cartExpanded!==$(486)&&(cartExpanded=!1))}else e&&(e[$(435)][$(501)]=$(559));t&&(t[$(356)]=a),carrito.forEach((e,t)=>{let a=$,o=document.createElement("li");o[a(435)][a(471)]=a(550),o[a(435)][a(400)]="35px";let i=document.createElement(a(578));i.innerHTML=a(434)+e[a(546)]+"</strong>&nbsp;<small>x"+e[a(363)]+a(323);let r=document.createElement(a(575));r[a(391)]=a(402),r[a(353)]='<i class="fas fa-times"></i>',r[a(466)]=function(){eliminarItemCarrito(t)},o[a(483)](i),o[a(483)](r),x[a(483)](o)})}function eliminarItemCarrito($){let x=_0x425344,e=carrito[$],t=document[x(411)](x(621));t[x(326)]($=>{let t=x,a=$[t(418)]("h3")?.[t(356)];if(a===e[t(546)]){let o=$[t(418)](".btn-agregar-carrito"),i=$[t(418)]('input[type="number"]')?.[t(618)],r=$[t(418)]('input[type="number"]');o&&i&&r&&(r[t(588)]="1",i[t(435)].display=t(358),i[t(435)][t(394)]="0",i[t(435)][t(462)]=t(325),o[t(435)].display=t(495),o[t(435)][t(394)]="1",o[t(435)][t(462)]=t(479),o[t(435)].background="",o.style.color="",o[t(435)][t(361)]="")}}),carrito.splice($,1),actualizarCarrito(),guardarCarritoLocal()}function mostrarModalPedidoConfirmado($,x){let e=_0x425344,t=document[e(518)](e(478));t&&t[e(416)]();let a=document[e(526)](e(578));a.id=e(478),a[e(391)]="modal",a[e(435)][e(501)]="flex",a[e(353)]=e(447),document[e(591)][e(483)](a),document[e(518)](e(388))[e(466)]=function(){let x=e;window[x(449)].href=x(334)+$}}function mostrarModalMinimoPedido($){let x=_0x425344,e=document[x(518)]("minimo-pedido-modal");e&&e[x(416)]();let t=5-$,a=document.createElement(x(578));a.id=x(339),a[x(391)]=x(407),a.style[x(501)]="flex",a.innerHTML='\n        <div class="modal-content" style="max-width:450px;position:relative;">\n            <div class="modal-header" style="background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);">\n                <h2 style=\'margin:0;\'><i class="fas fa-info-circle"></i> Pedido M\xednimo Requerido</h2>\n                <p style=\'margin:8px 0 0 0;\'>Para procesar tu pedido necesitamos un m\xednimo de unidades</p>\n            </div>\n            <div class="modal-body" style="padding:30px; text-align:center;">\n                <div style="background:#fff3e0;border-radius:12px;padding:20px;margin-bottom:20px;">\n                    <i class="fas fa-shopping-cart" style="font-size:3em;color:#ff9800;margin-bottom:15px;"></i>\n                    <p style="margin:0;color:#333;line-height:1.8;font-size:1.05em;">\n                        <strong>Necesitas agregar al menos 5 unidades para procesar el pedido.</strong>\n                    </p>\n                    <div style="margin-top:20px;padding:15px;background:#fff;border-radius:8px;border-left:4px solid #ff9800;">\n                        <p style="margin:0;color:#666;font-size:0.95em;">\n                            Actualmente tienes <strong style="color:#ff9800;font-size:1.2em;">'+$+x(409)+(1===$?x(368):"unidades")+' en tu carrito.\n                        </p>\n                        <p style="margin:10px 0 0 0;color:#666;font-size:0.95em;">\n                            Te '+(1===t?x(382):x(610))+x(425)+t+x(409)+(1===t?"unidad":x(423))+x(505),document.body[x(483)](a),document[x(518)](x(533))[x(466)]=function(){a[x(416)]()},a[x(466)]=function($){$[x(601)]===a&&a.remove()}}function limpiarCarrito(){let $=_0x425344;carrito=[],document[$(411)]($(621))[$(326)](x=>{let e=$,t=x[e(418)](".btn-agregar-carrito"),a=x.querySelector(e(369))?.[e(618)],o=x[e(418)](e(369));t&&a&&o&&(o.value="1",a[e(435)].display=e(358),a[e(435)][e(394)]="0",a[e(435)].transform=e(325),t[e(435)][e(501)]=e(495),t[e(435)][e(394)]="1",t[e(435)][e(462)]=e(479),t[e(435)].background="",t[e(435)][e(558)]="",t[e(435)].border="")}),actualizarCarrito(),guardarCarritoLocal()}function enviarPedido(){let $=_0x425344;if(0===carrito.length){alert("El carrito est\xe1 vac\xedo. Agrega productos antes de continuar.");return}let x=carrito.reduce((x,e)=>x+e[$(363)],0);if(x<5){mostrarModalMinimoPedido(x);return}if(modoEdicion){enviarPedidoFinal();return}let e=document[$(518)]($(445));e&&(e[$(435)][$(501)]=$(559))}function enviarPedidoFinal(){let $=_0x425344;if(modoEdicion&&pedidoEditId){let x=db.ref("pedidos/"+pedidoEditId);x[$(436)]($(588))[$(617)](e=>{let t=$;if(!e[t(440)]()){alert(t(327));return}let a=e.val();if(a[t(335)]){alert(t(345));return}return carrito[t(326)]($=>{let x=t,e=a[x(333)][x(341)](e=>e[x(546)]===$[x(546)]);e>-1?a[x(333)][e][x(363)]+=$[x(363)]:a[x(333)][x(540)]({nombre:$[x(546)],cantidad:$.cantidad,valorUSD:$[x(623)],codigo:$[x(596)]||"",categoria:$[x(370)]||""})}),a[t(525)]={nombre:datosExtraCliente[t(546)]||a[t(525)]?.[t(546)]||"",telefono:datosExtraCliente[t(620)]||a.cliente?.[t(620)]||"",localidad:datosExtraCliente.localidad||a.cliente?.[t(372)]||"",direccion:datosExtraCliente[t(508)]||a.cliente?.[t(508)]||"",provincia:datosExtraCliente[t(519)]||a[t(525)]?.[t(519)]||"",dni:String(datosExtraCliente[t(502)]||a[t(525)]?.[t(502)]||""),email:datosExtraCliente.email||a[t(525)]?.[t(475)]||"",tipoCliente:datosExtraCliente[t(349)]||a[t(525)]?.[t(349)]||"mayorista"},x.update({items:a[t(333)],cliente:a[t(525)],adminViewed:!1,lastUpdated:Date[t(593)]()})})[$(617)](()=>{let x=$;alert(x(365)),setTimeout(()=>{let $=x;window[$(449)][$(602)]($(334)+pedidoEditId)},300)})[$(392)](x=>{let e=$;console.error(e(541),x),alert(e(338)+x[e(562)])});return}if(0===carrito[$(337)]){alert($(457));return}let e=datosExtraCliente[$(475)]||"";db[$(446)]($(521))[$(605)]($(475))[$(565)](e[$(490)]())[$(374)](1).once($(588))[$(617)](x=>{let t=$;return!x[t(440)]()&&e?db[t(446)]("clientes")[t(540)]({email:e.toLowerCase(),nombre:datosExtraCliente[t(546)]||"",telefono:datosExtraCliente[t(620)]||"",localidad:datosExtraCliente[t(372)]||"",direccion:datosExtraCliente[t(508)]||"",provincia:datosExtraCliente[t(519)]||"",dni:String(datosExtraCliente.dni||""),tipoCliente:datosExtraCliente[t(349)]||t(444),registro:t(378)}):Promise[t(527)]()})[$(617)](()=>{let x=$,e=db.ref(x(351)).push(),t=e[x(458)],a={id:t,timestamp:Date[x(593)](),locked:!1,adminViewed:!1,createdby:x(378),status:x(500),cliente:{nombre:datosExtraCliente[x(546)]||"",telefono:datosExtraCliente.telefono||"",localidad:datosExtraCliente[x(372)]||"",direccion:datosExtraCliente[x(508)]||"",provincia:datosExtraCliente[x(519)]||"",dni:String(datosExtraCliente.dni||""),email:datosExtraCliente.email||"",tipoCliente:datosExtraCliente[x(349)]||x(444)},items:carrito.map($=>({nombre:$[x(546)],cantidad:$[x(363)],valorUSD:$[x(623)],codigo:$.codigo||"",categoria:$[x(370)]||""}))};return e.set(a)[x(617)](()=>t)})[$(617)](x=>{let e=$;datosExtraCliente[e(475)]&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(datosExtraCliente.email)&&emailjs.send(e(427),e(476),{email:datosExtraCliente[e(475)],name:datosExtraCliente[e(546)],linkPedido:"https://www.home-point.com.ar/pedidos.html?id="+x})[e(617)](function($){let x=e;console.log("Email enviado!",$[x(488)],$[x(384)])},function($){let x=e;console[x(496)](x(491),$)}),mostrarModalPedidoConfirmado(x,datosExtraCliente.email),limpiarCarrito(),datosExtraCliente={}})[$(392)](x=>{let e=$;console[e(496)](e(469),x),alert(e(380)+x[e(562)])})}window[_0x425344(538)]("resize",()=>{let $=_0x425344;if(typeof currentPage!==$(486)){let x=datosFiltrados.length>0?datosFiltrados:productos;actualizarPaginacion(currentPage,x)}}),document[_0x425344(518)](_0x425344(537)).addEventListener(_0x425344(612),$=>{let x=_0x425344;$[x(584)](),currentLightboxImages[x(337)]>0&&(currentImageIndex=(currentImageIndex+1)%currentLightboxImages[x(337)],document[x(518)](x(594)).src=currentLightboxImages[currentImageIndex])}),document.getElementById(_0x425344(443))[_0x425344(538)](_0x425344(612),$=>{let x=_0x425344;$[x(584)](),currentLightboxImages.length>0&&(currentImageIndex=(currentLightboxImages[x(337)]+currentImageIndex-1)%currentLightboxImages[x(337)],document[x(518)](x(594)).src=currentLightboxImages[currentImageIndex])}),document[_0x425344(518)]("lightbox-img")[_0x425344(538)](_0x425344(496),function(){let $=_0x425344;currentLightboxImages[$(337)]>0&&0!==currentImageIndex&&(currentImageIndex=0,this[$(451)]=currentLightboxImages[0])}),document[_0x425344(538)]("DOMContentLoaded",function(){let $=_0x425344;document.getElementById("marquee-text-1")[$(353)]=MARQUEE_TEXT,document[$(518)]($(585))[$(353)]=MARQUEE_TEXT,cargarCarritoLocal()});const hamburgerBtn=document[_0x425344(518)](_0x425344(512)),hamburgerDropdown=document[_0x425344(518)](_0x425344(497));hamburgerBtn[_0x425344(538)](_0x425344(612),function($){let x=_0x425344;$[x(584)](),hamburgerDropdown[x(576)].toggle(x(459))}),document.addEventListener(_0x425344(612),function($){let x=_0x425344;hamburgerBtn.contains($[x(601)])||hamburgerDropdown.contains($[x(601)])||hamburgerDropdown.classList[x(416)](x(459))}),document[_0x425344(411)](_0x425344(616))[_0x425344(326)]($=>{let x=_0x425344;$[x(538)](x(612),function(){let $=x;hamburgerDropdown[$(576)][$(416)]($(459))})});const ultimoPedidoBtn=document[_0x425344(518)](_0x425344(389)),ultimoPedidoModal=document[_0x425344(518)](_0x425344(467)),closeUltimoPedidoModal=document[_0x425344(518)](_0x425344(606)),buscarUltimoPedidoBtn=document[_0x425344(518)](_0x425344(624)),ultimoPedidoEmailInput=document.getElementById(_0x425344(362)),buscarBtnText=document[_0x425344(518)]("buscarBtnText"),buscarSpinner=document[_0x425344(518)](_0x425344(515)),ultimoPedidoMensaje=document[_0x425344(518)](_0x425344(439));function mostrarMensajeBusqueda($,x){let e=_0x425344,t=ultimoPedidoMensaje,a=t[e(418)](".fas"),o=t[e(418)](e(532));$===e(496)?(t.style[e(577)]=e(589),t[e(435)][e(454)]=e(331),t[e(435)].color=e(528),a[e(391)]=e(614)):$===e(414)?(t.style.backgroundColor=e(523),t[e(435)][e(454)]=e(359),t[e(435)][e(558)]=e(344),a[e(391)]="fas fa-check-circle"):$===e(324)&&(t[e(435)].backgroundColor=e(422),t[e(435)].borderLeft=e(470),t[e(435)][e(558)]=e(520),a[e(391)]=e(573)),o[e(356)]=x,t[e(435)][e(501)]=e(559),t[e(435)][e(385)]=e(504)}function ocultarMensajeBusqueda(){ultimoPedidoMensaje.style.display="none"}function setEstadoCargaBusqueda($){let x=_0x425344;buscarUltimoPedidoBtn.disabled=$,buscarUltimoPedidoBtn[x(435)][x(394)]=$?"0.7":"1",buscarUltimoPedidoBtn[x(435)][x(611)]=$?"not-allowed":x(613),buscarBtnText.style[x(501)]=$?"none":x(492),buscarSpinner.style[x(501)]=x($?495:358),ultimoPedidoEmailInput[x(321)]=$}function _0x43c4($,x){$-=319;let e=_0x454e();return e[$]}function _0x454e(){let $=[".stock-info","textAlign","trim","stopPropagation","marquee-text-2","not-allowed","hidden","value","#fee","statusText","body","match","now","lightbox-img","option","codigo","mousedown",".carousel-slide","transition","\uD83D\uDCB2&nbsp; Los valores publicados se encuentran ligados a la cotizaci\xf3n del d\xf3lar del d\xeda &nbsp; \uD83D\uDED2\uD83D\uDECD️ &nbsp; Visita nuestro Showroom y compr\xe1 sin requisitos minimos de compra &nbsp; \uD83D\uDE9A &nbsp; ENV\xcdOS A TODO EL PA\xcdS","target","replace","Enter","auto","orderByChild","closeUltimoPedidoModal","#fff","infoModalBody","floor","faltan","cursor","click","pointer","fas fa-exclamation-circle","pagination",".hamburger-dropdown-item","then","parentElement","carritoMayorista","telefono",".card","keydown","precio","buscarUltimoPedidoBtn","input","50px","disabled","DOMContentLoaded","</small>\n        ","info","scale(0.8)","forEach","Error: No se encontr\xf3 el pedido original","height","API_KEY","carousel-images","4px solid #e53e3e","values","items","pedidos.html?id=","locked","Siguiente","length","Error al actualizar el pedido: ","minimo-pedido-modal","minHeight","findIndex","add",'input[type="hidden"]',"#2f855a","Este pedido est\xe1 cerrado y no se puede editar.","marginBottom",'<span style="color: #4CAF50;">✓ Disponible</span>',"16px","tipoCliente","borderRadius","pedidos","loading","innerHTML","fontWeight","4px","textContent","loadingOverlay","none","4px solid #48bb78","Error al guardar carrito en localStorage:","border","ultimoPedidoEmailInput","cantidad","val","\xa1Art\xedculos agregados exitosamente al pedido!","filtroDisponibles","Error al cargar carrito desde localStorage:","unidad",'input[type="number"]',"categoria","</p>\n            </div>\n        ","localidad","12VgPGSQ","limitToFirst","info-icon","740512SOEBvH","translateX(","web","removeItem","Error al guardar el pedido: ","marginTop","falta","sort","text","alignItems","pageYOffset","https://api.whatsapp.com/send/?phone=5491121891006","verPedidoBtnConfirmado","ultimoPedidoBtn","splice","className","catch","activeElement","opacity","RANGO","lazy",'<span style="font-size:0.93em;"><strong>Antes $</strong> <s style="color: #e61919;">',"find","toString","paddingRight","SPREADSHEET_ID","cart-item-delete"," unidades disponibles","scrollTo","todos","width","modal","1925580ZEwTuh","</strong> ",'<span style="color: #ffeb3b;">⚠ Pocas unidades</span>',"querySelectorAll","104ibozBw","from","success","No se encontraron pedidos registrados con este email","remove","categorias","querySelector","open","gap","checked","#e6f7ff","unidades","stringify",' <strong style="color:#ff9800;font-size:1.2em;">',"justifyContent","service_lu9cpxk","json","⚙️ Est\xe1s agregando art\xedculos al pedido #","max","number","35px","vcbQsbE2bgLwFAnDr","\n            <strong>","style","once","indexOf","C\xf3digo: ","ultimoPedidoMensaje","exists","#4CAF50","all 0.3s ease","prev-btn","mayorista","clienteModal","ref",'\n        <div class="modal-content" style="max-width:450px;position:relative;">\n            <div class="modal-header">\n                <h2 style=\'margin:0;\'><i class="fas fa-check-circle"></i> \xa1Pedido Confirmado!</h2>\n                <p style=\'margin:8px 0 0 0;\'>Tu pedido se ha procesado exitosamente</p>\n            </div>\n            <div class="modal-body" style="padding:30px; text-align:center;">\n                <div style="background:#f0f9f0;border-radius:12px;padding:20px;margin-bottom:20px;">\n                    <i class="fas fa-envelope" style="font-size:3em;color:#4CAF50;margin-bottom:15px;"></i>\n                    <p style="margin:0;color:#333;line-height:1.6;">\n                        Se envi\xf3 una notificaci\xf3n a tu email con todos los detalles del pedido. \n                        Puedes verlo, modificarlo o realizar el seguimiento desde all\xed.\n                    </p>\n                </div>\n                <button id="verPedidoBtnConfirmado" class="btn-primary" style="width:100%;margin:0;">\n                    <i class="fas fa-eye"></i> Ver Mi Pedido\n                </button>\n            </div>\n        </div>\n    ',"#ff9800","location","borderColor","src","split","cartFloatBtn","borderLeft","innerWidth","1px solid #ddd","El carrito est\xe1 vac\xedo.","key","active","100px","currentTarget","transform","documentElement",'\n            <div class="info-modal-section">\n                <h4>Tama\xf1o</h4>\n                <p>',"bold","onclick","ultimoPedidoModal","5px 10px","Error al guardar pedido o cliente:","4px solid #4299e1","position","contains","padding",'<span style="color: #ff9800;">✗ Sin stock</span>',"email","template_xqo1j5z","timestamp","pedido-confirmado-modal","scale(1)","5px","change","base","appendChild","cartBadge","pedidos/","undefined","1px solid #4CAF50","status","title","toLowerCase","Error enviando email:","inline","Error al cargar pedido existente:","Este producto no tiene stock disponible.","block","error","hamburgerDropdown","includes","ceil","ABIERTO","display","dni","1338732DbkOQQ","center",' m\xe1s.\n                        </p>\n                    </div>\n                </div>\n                <button id="cerrarMinimoPedidoBtn" class="btn-primary" style="width:100%;margin:0;background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);">\n                    <i class="fas fa-check"></i> Entendido\n                </button>\n            </div>\n        </div>\n    ',"getItem","buscar","direccion","carousel-pie-images","smooth","No se encontraron datos en la hoja.","hamburgerBtn","localeCompare","cart-list","buscarSpinner","reduce","getBoundingClientRect","getElementById","provincia","#2b6cb0","clientes","parse","#e6ffed","show","cliente","createElement","resolve","#c53030","min","_blank","187142qTfHDh","span","cerrarMinimoPedidoBtn","580993KktoZO","stock-info","364483OSIRMJ","next-btn","addEventListener"," unidades disponibles.","push","Error al actualizar pedido:","Anterior","focus","54px","infoModal","nombre","10px 10px","333009LgHteq","filter","relative","card","\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      z-index: 3001;\n      background: #fff7c2;\n      padding: 10px 0;\n      text-align: center;\n      font-weight: bold;\n      font-size: 1.1em;\n      box-shadow: 0 2px 8px #0002;\n      border-bottom: 2px solid #ffe066;\n    ","Sin stock disponible","5px 0","pagination-button",'<i class="fas fa-info"></i>',"cssText","color","flex","#error","M\xe1ximo ","message",".btn-agregar-carrito","test","equalTo","/values/","fontSize","Error al buscar el pedido. Por favor, intenta de nuevo","setItem","no-disponible.png","https://sheets.googleapis.com/v4/spreadsheets/","scrollTop","fas fa-info-circle","close","button","classList","backgroundColor","div","2px","#cccccc"];return(_0x454e=function(){return $})()}ultimoPedidoBtn[_0x425344(538)](_0x425344(612),function(){let $=_0x425344;ultimoPedidoModal[$(435)][$(501)]="flex",ultimoPedidoEmailInput[$(588)]="",ocultarMensajeBusqueda(),setTimeout(()=>ultimoPedidoEmailInput[$(543)](),100)}),closeUltimoPedidoModal.addEventListener(_0x425344(612),function(){let $=_0x425344;ultimoPedidoModal[$(435)][$(501)]="none",ocultarMensajeBusqueda()}),ultimoPedidoModal[_0x425344(538)](_0x425344(597),function($){let x=_0x425344;$.target===ultimoPedidoModal&&(ultimoPedidoModal[x(435)][x(501)]="none",ocultarMensajeBusqueda())}),buscarUltimoPedidoBtn.addEventListener("click",function(){let $=_0x425344,x=ultimoPedidoEmailInput[$(588)][$(583)]().toLowerCase();if(ocultarMensajeBusqueda(),!x||!/^[^@\s]+@[^@\s]+\.[^@\s]+$/[$(564)](x)){mostrarMensajeBusqueda($(496),"Por favor, ingres\xe1 un email v\xe1lido"),ultimoPedidoEmailInput.focus();return}setEstadoCargaBusqueda(!0),db[$(446)]("pedidos").orderByChild("cliente/email").equalTo(x)[$(436)]($(588))[$(617)](x=>{let e=$;if(setEstadoCargaBusqueda(!1),!x[e(440)]()){mostrarMensajeBusqueda("error",e(415));return}let t=null;x[e(326)]($=>{let x=e,a=$[x(364)]();(!t||a[x(477)]>t.timestamp)&&(t=a)}),t&&t.id?(mostrarMensajeBusqueda(e(414),"\xa1Pedido encontrado! Redirigiendo..."),setTimeout(()=>{let $=e;window[$(419)]("pedidos.html?id="+t.id,$(530)),ultimoPedidoModal[$(435)].display=$(358),ocultarMensajeBusqueda(),ultimoPedidoEmailInput[$(588)]=""},800)):mostrarMensajeBusqueda("error",e(415))})[$(392)](()=>{setEstadoCargaBusqueda(!1),mostrarMensajeBusqueda("error",$(568))})}),ultimoPedidoEmailInput[_0x425344(538)](_0x425344(622),function($){let x=_0x425344;$[x(458)]===x(603)&&buscarUltimoPedidoBtn[x(612)]()}),document.addEventListener(_0x425344(322),function(){let $=_0x425344,x=document.getElementById($(509));if(x){let e=x[$(411)]($(598)),t=0;e[$(337)]>0&&setInterval(()=>{t=(t+1)%e[$(337)],function e(){let a=$,o=-(100*t);x[a(435)][a(462)]="translateX("+o+"%)"}()},5e3)}});
