const _0x5d99c9=_0x1b61;(function($,x){let e=_0x1b61,a=$();for(;;)try{let t=parseInt(e(281))/1+-parseInt(e(307))/2+parseInt(e(374))/3+-parseInt(e(255))/4*(-parseInt(e(382))/5)+-parseInt(e(234))/6*(parseInt(e(116))/7)+parseInt(e(397))/8+parseInt(e(358))/9;if(416911===t)break;a.push(a.shift())}catch(o){a.push(a.shift())}})(_0x49cd,416911),emailjs.init(_0x5d99c9(222));const WHATSAPP_URL=_0x5d99c9(238),MARQUEE_TEXT=_0x5d99c9(108),ITEMPESOS="6";firebase.initializeApp(firebaseConfig);const db=firebase.database(),clienteCache=new Map,CACHE_DURATION=6e5,pedidosAbiertoCache=new Map;function limpiarCacheExpirado(){let $=_0x5d99c9,x=Date[$(361)]();for(let[e,a]of clienteCache[$(131)]())x-a[$(331)]>6e5&&clienteCache[$(233)](e);for(let[t,o]of pedidosAbiertoCache[$(131)]())x-o[$(331)]>6e5&&pedidosAbiertoCache[$(233)](t)}setInterval(limpiarCacheExpirado,3e5),document[_0x5d99c9(364)]("DOMContentLoaded",function(){let $=_0x5d99c9,x=document[$(190)]("carousel-images"),e=x?x.querySelectorAll($(213)):[],a=0;e[$(296)]>0&&setInterval(()=>{a=(a+1)%e[$(296)],function t(){let o=$;if(x&&e[o(296)]>0){let i=-(100*a);x[o(377)].transform=o(334)+i+"%)"}}()},5e3)});const ITEMS_PER_PAGE=30;let productos=[],datosFiltrados=[],currentPage=1,carrito=[],currentLightboxImages=[],currentImageIndex=0,datosExtraCliente={};function guardarCarritoLocal(){let $=_0x5d99c9;if(!modoEdicion)try{localStorage.setItem($(262),JSON.stringify(carrito))}catch(x){console[$(279)]($(326),x)}}function cargarCarritoLocal(){let $=_0x5d99c9;if(!modoEdicion)try{let x=localStorage[$(288)]($(262));x&&(carrito=JSON[$(191)](x),actualizarCarrito())}catch(e){console[$(279)]("Error al cargar carrito desde localStorage:",e),carrito=[]}}const urlParams=new URLSearchParams(window[_0x5d99c9(276)].search),pedidoEditId=urlParams[_0x5d99c9(138)](_0x5d99c9(305)),modoEdicion=!!pedidoEditId;if(modoEdicion){localStorage[_0x5d99c9(420)]("carritoMayorista");let $=document[_0x5d99c9(304)](_0x5d99c9(426));$[_0x5d99c9(201)]="⚙️ Est\xe1s agregando art\xedculos al pedido #"+pedidoEditId,$.id="aviso-edicion-pedido",$[_0x5d99c9(377)][_0x5d99c9(267)]=_0x5d99c9(224),document[_0x5d99c9(417)][_0x5d99c9(275)]($),document.body[_0x5d99c9(377)][_0x5d99c9(176)]=_0x5d99c9(398),db[_0x5d99c9(409)]("pedidos/"+pedidoEditId)[_0x5d99c9(345)](_0x5d99c9(152))[_0x5d99c9(236)]($=>{let x=_0x5d99c9;if($.exists()){let e=$[x(209)]();datosExtraCliente=e.cliente||{},console[x(244)](x(140),e)}})[_0x5d99c9(431)]($=>{console.error("Error al cargar pedido existente:",$)})}const loadingOverlay=document.getElementById(_0x5d99c9(346));fetch(_0x5d99c9(225)+GOOGLE_SHEETS_CONFIG[_0x5d99c9(168)]+_0x5d99c9(367)+GOOGLE_SHEETS_CONFIG[_0x5d99c9(158)]+_0x5d99c9(135)+GOOGLE_SHEETS_CONFIG[_0x5d99c9(324)])[_0x5d99c9(236)]($=>{let x=_0x5d99c9;if(!$.ok)throw Error(x(317)+$.statusText);return $[x(155)]()})[_0x5d99c9(236)]($=>{let x=_0x5d99c9;loadingOverlay&&(loadingOverlay[x(377)][x(332)]=x(349));let e=$.values;if(!e||0===e[x(296)])throw Error(x(389));datosFiltrados=productos=e[x(252)]($=>""!==($[3]||"")[x(395)]()[x(218)]())[x(119)](($,x)=>{function e($){let x=_0x1b61;if(!$||""===$||null==$)return new Date(1900,0,1);if($[x(404)]("/")){let e=$[x(111)]("/");if(3===e[x(296)]){let a=parseInt(e[0]),t=parseInt(e[1])-1,o=parseInt(e[2]);return new Date(o,t,a)}}return new Date(1900,0,1)}let a=e($[12]),t=e(x[12]);return t-a}),window.scrollTo(0,0),mostrarPagina(1),setTimeout(()=>{let $=x;refreshStockInfo(),document[$(190)]($(197))[$(235)]&&i(),setTimeout(()=>{primeraCarga=!1},100)},100);let a=new Set(productos.map($=>$[0])),t=document[x(190)](x(287)),o=Array[x(257)](a)[x(252)]($=>$&&""!==$[x(218)]()).sort(($,e)=>$[x(204)](e,"es",{sensitivity:x(376)}));function i(){let $=x,e=document[$(190)]($(287))[$(152)],a=document[$(190)]("buscar").value[$(351)](),t=document[$(190)]($(197))[$(235)],o=productos;"todos"!==e&&(o=o.filter($=>$[0]===e)),""!==a[$(218)]()&&(o=o.filter(x=>x[3].toLowerCase()[$(404)](a)||x[2][$(351)]()[$(404)](a)||x[17]&&x[17][$(351)]()[$(404)](a))),t&&(o=o[$(252)](x=>{let e=x[10];if(null==e||""===e)return!1;let a=parseInt(String(e)[$(218)]());return!isNaN(a)&&a>1})),datosFiltrados=o,mostrarPagina(1,o)}o[x(362)]($=>{let e=x,a=document[e(304)](e(214));a[e(152)]=$,a[e(201)]=$,t.appendChild(a)}),t[x(364)]("change",()=>{i()}),document.getElementById(x(419))[x(364)](x(344),$=>{i()}),document[x(190)](x(197))[x(364)](x(109),()=>{i()}),document[x(190)](x(194))[x(364)](x(226),()=>{let $=x;document[$(190)]("categorias")[$(152)]=$(194),document[$(190)]($(419))[$(152)]="",document[$(190)]($(197))[$(235)]=!1,datosFiltrados=productos,mostrarPagina(1)})})[_0x5d99c9(431)]($=>{let x=_0x5d99c9;loadingOverlay&&(loadingOverlay[x(377)][x(332)]=x(349)),console.error("Error al cargar los datos:",$),document.querySelector(x(298))[x(201)]=$[x(242)]});let primeraCarga=!0;function mostrarPagina($,x=productos){let e=_0x5d99c9;currentPage=$,x[e(296)];let a=($-1)*30,t=x[e(154)](a,a+30);cargarGrid(t),actualizarPaginacion($,x),document[e(390)]!==document[e(190)]("buscar")&&setTimeout(()=>{let $=e;if(primeraCarga)window[$(387)]({top:0,behavior:$(371)});else{let x=document.getElementById("categorias");if(x){let a=x[$(223)](),t=window[$(182)]||document[$(360)][$(132)];window.scrollTo({top:a[$(147)]+t-20,behavior:$(396)})}}},0)}function cargarGrid($){let x=_0x5d99c9,e=document[x(190)](x(375));e[x(406)]="",$[x(362)]($=>{let a=x,t=document[a(304)](a(426));t[a(394)][a(184)](a(293));let o=document[a(304)](a(344));o[a(127)]=a(148),o.value=$[2],t[a(275)](o);let i=$[14]||"",d=$[15]||"";if(i||d){let r=document[a(304)](a(426));r[a(394)][a(184)]("info-icon"),r[a(406)]=a(173),r[a(368)]=a(283),r[a(364)](a(226),()=>{mostrarInfoModal($[3],i,d)}),t[a(275)](r)}if(isValidImageUrl($[1])){let n=[];-1!==$[1][a(130)](",")?n=$[1][a(111)](",")[a(335)]($=>$[a(218)]()):n[a(363)]($[1]);let _=document[a(304)]("img");_[a(271)]=n[0],_[a(370)]=a(424),_[a(286)]=function(){let $=a;this[$(271)]=$(328)},_[a(364)](a(226),()=>{abrirLightbox(n)}),t[a(275)](_)}let c=document.createElement("h3");c[a(201)]=$[3],t[a(275)](c);let l=document[a(304)](a(426));l[a(394)].add(a(392)),l[a(201)]=a(137)+$[2],t[a(275)](l);let s=document[a(304)](a(426));s.classList[a(184)](a(210)),s[a(377)].margin="5px 0",s[a(377)].fontWeight=a(183);let u=0;void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(u=parseInt($[10])),isNaN(u)?s[a(406)]=a(277):u<=1?s[a(406)]=a(277):u<=10?s[a(406)]=a(274):s[a(406)]=a(149),t[a(275)](s);{let f=document.createElement("p");f[a(406)]=a(200)+$[13]+a(399),f.style[a(251)]=a(348),t[a(275)](f)}let m=document[a(304)]("p");m[a(406)]=a(264)+$["6"],m.style[a(176)]=a(170),t[a(275)](m);let p=document[a(304)](a(426));p[a(377)][a(332)]=a(373),p[a(377)][a(356)]=a(425),p.style.justifyContent=a(425),p[a(377)][a(189)]="5px",p[a(377)].minHeight="50px";let b=document[a(304)](a(426));b[a(377)][a(332)]=a(349),b[a(377)][a(356)]=a(425),b[a(377)][a(189)]=a(348),b[a(377)][a(280)]=a(295),b[a(377)][a(291)]="0";let g=document[a(304)]("button");g[a(406)]="-",g[a(377)].padding=a(195),g[a(377)][a(320)]=a(308),g[a(377)][a(432)]=a(120),g[a(377)][a(421)]="35px",g.style[a(379)]="#ff9800",g.style[a(321)]=a(311),g.style[a(126)]=a(357),g.style[a(260)]=a(227),g[a(377)][a(239)]="pointer";let h=document.createElement(a(344));h[a(127)]="number",h[a(115)]="1",h.value="1",h[a(377)][a(421)]=a(272),h.style[a(432)]=a(120),h[a(377)][a(164)]="5px",h[a(377)].textAlign=a(425),h.style[a(126)]=a(411),h[a(377)][a(260)]=a(227);let E=document.createElement(a(230));E.innerHTML="+",E[a(377)].padding=a(195),E[a(377)][a(320)]=a(308),E[a(377)][a(432)]="35px",E.style[a(421)]="35px",E[a(377)].backgroundColor=a(136),E[a(377)][a(321)]=a(311),E[a(377)][a(126)]="1px solid #ff9800",E[a(377)][a(260)]=a(227),E.style[a(239)]=a(237),b.appendChild(g),b[a(275)](h),b[a(275)](E);let y=document[a(304)](a(230));function C(){let x=a,e=parseInt(h[x(152)]);if(e>0){let t=carrito[x(198)]($=>$[x(185)]===c[x(201)]);t?t[x(300)]=e:agregarAlCarrito(c[x(201)],$[6],e,$[2],$[0],$[7][x(395)]()[x(259)](/[,\.]/g,""),$[6].toString()[x(259)](/[,\.]/g,"")),actualizarCarrito()}}y[a(406)]=a(156),y[a(377)][a(164)]="10px 10px",y.style[a(320)]=a(308),y[a(377)][a(432)]=a(272),y[a(377)][a(421)]="50px",y[a(377)][a(379)]="#4CAF50",y[a(377)].color="#fff",y[a(377)][a(126)]=a(134),y[a(377)][a(260)]=a(227),y[a(377)][a(239)]=a(237),y[a(377)][a(280)]=a(295),y[a(394)][a(184)]("btn-agregar-carrito"),!isNaN(u)&&u>0?(h[a(253)]=u,h[a(368)]=a(339)+u+a(284)):(y[a(250)]=!0,y[a(377)][a(379)]=a(353),y[a(377)].borderColor=a(353),y[a(377)][a(239)]=a(378),y[a(368)]="Sin stock disponible"),y[a(364)](a(226),()=>{let x=0;if(void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(x=parseInt($[10])),isNaN(x)||x<=0){alert(a(144));return}h.value="1",C(),function $(){let x=a;y[x(377)][x(291)]="0",y[x(377)][x(203)]=x(125),setTimeout(()=>{let $=x;y[$(377)][$(332)]=$(349),b.style[$(332)]=$(373),setTimeout(()=>{let x=$;b[x(377)][x(291)]="1",b[x(377)][x(203)]=x(355)},50)},150)}()}),E.addEventListener(a(226),()=>{let x=a,e=0;void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(e=parseInt($[10]));let t=parseInt(h.value);if(!isNaN(e)&&t>=e){alert(x(418)+e+x(248));return}h.value=t+1,C()}),g[a(364)](a(226),()=>{let $=a,x=parseInt(h[$(152)]);if(x>1)h.value=x-1,C();else{let e=carrito.find(x=>x[$(185)]===c[$(201)]);if(e){let t=carrito[$(130)](e);carrito[$(145)](t,1),actualizarCarrito()}b[$(377)].opacity="0",b[$(377)][$(203)]=$(125),setTimeout(()=>{let x=$;b[x(377)][x(332)]=x(349),y.style[x(332)]=x(219),y[x(377)].opacity="0",y.style[x(203)]="scale(0.8)",setTimeout(()=>{let $=x;y.style[$(291)]="1",y[$(377)][$(203)]=$(355)},50)},150)}}),h[a(364)](a(109),()=>{let x=a,e=parseInt(h[x(152)]),t=0;void 0!==$[10]&&null!==$[10]&&""!==$[10]&&(t=parseInt($[10])),e<=0?h[x(152)]="1":!isNaN(t)&&e>t&&(alert(x(418)+t+x(248)),h[x(152)]=t),C()}),p[a(275)](y),p.appendChild(b),t.appendChild(p),e[a(275)](t)})}function refreshStockInfo(){let $=_0x5d99c9,x=document[$(337)]($(302));x[$(362)](x=>{let e=$,a=x.querySelector(e(202));if(a){let t=x.querySelector(e(199));if(t){let o=t[e(152)],i=productos.find($=>$[2]===o),d=0;i&&void 0!==i[10]&&null!==i[10]&&""!==i[10]&&(d=parseInt(i[10])),isNaN(d)?a[e(406)]=e(277):d<=1?a[e(406)]=e(277):d<=10?a[e(406)]=e(274):a[e(406)]=e(149);let r=x[e(347)](e(114)),n=x[e(347)](e(350));r&&(!isNaN(d)&&d>0?(r[e(253)]=d,r[e(250)]=!1,r[e(368)]=e(339)+d+" unidades disponibles",n&&n.disabled&&(n.disabled=!1,n[e(377)][e(379)]=e(415),n[e(377)].borderColor=e(415),n.style.cursor=e(237),n[e(368)]="")):(r.disabled=!0,r[e(368)]=e(142),n&&(n[e(250)]=!0,n[e(377)][e(379)]=e(353),n[e(377)][e(212)]="#cccccc",n[e(377)][e(239)]=e(378),n[e(368)]="Sin stock disponible")))}}})}function agregarAlCarrito($,x,e,a,t){let o=_0x5d99c9,i=0===carrito[o(296)],d=carrito.find(x=>x[o(185)]===$);d?d[o(300)]+=e:carrito[o(363)]({nombre:$,precio:x,cantidad:e,codigo:a,categoria:t}),actualizarCarrito(),guardarCarritoLocal(),i&&!modoEdicion&&mostrarModalInfoPrimerArticulo()}function getMaxVisiblePaginationButtons(){let $=_0x5d99c9,x=document.getElementById($(117)),e=window[$(159)];x&&(e=x[$(121)]||e);let a=Math.max(3,Math[$(211)]((e-220)/48));return Math[$(115)](a,15)}function actualizarPaginacion($,x){let e=_0x5d99c9,a=document[e(190)](e(117));a[e(406)]="";let t=Math[e(333)](x[e(296)]/30);if($>1){let o=document[e(304)](e(230));o.textContent=e(301),o[e(377)][e(421)]=e(312),o[e(364)]("click",()=>mostrarPagina($-1,x)),a.appendChild(o)}let i=getMaxVisiblePaginationButtons(),d=Math[e(253)](1,$-Math.floor(i/2)),r=Math[e(115)](t,d+i-1);r-d<i-1&&(d=Math.max(1,r-i+1));for(let n=d;n<=r;n++){let _=document.createElement("button");_[e(201)]=n,_.classList.add(e(299)),n===$&&_.classList.add(e(413)),_[e(364)](e(226),()=>mostrarPagina(n,x)),a[e(275)](_)}if($<t){let c=document[e(304)]("button");c.textContent="Siguiente",c[e(377)][e(421)]=e(312),c[e(364)]("click",()=>mostrarPagina($+1,x)),a.appendChild(c)}}function isValidImageUrl($){return $&&$[_0x5d99c9(139)](/\.(jpeg|jpg|gif|png)$/i)}function abrirLightbox($){let x=_0x5d99c9;currentLightboxImages=$,currentImageIndex=0,document[x(190)](x(187))[x(271)]=currentLightboxImages[currentImageIndex],document.getElementById("lightbox")[x(377)].display=x(373),actualizarBotonesLightbox()}function actualizarBotonesLightbox(){let $=_0x5d99c9,x=document.getElementById($(215)),e=document[$(190)]($(163));currentLightboxImages[$(296)]>1?(x[$(377)][$(332)]=$(219),e[$(377)].display="block"):(x[$(377)][$(332)]="none",e.style[$(332)]="none")}function closeLightbox($){let x=_0x5d99c9;($[x(118)]===$[x(153)]||$[x(118)][x(394)].contains(x(206)))&&(document.getElementById(x(167))[x(377)][x(332)]=x(349))}function mostrarInfoModal($,x,e){let a=_0x5d99c9,t=document.getElementById(a(372)),o=document.getElementById(a(196)),i=document[a(190)](a(240));o[a(201)]=$;let d="";x&&""!==x[a(218)]()&&(d+=a(216)+x+a(112)),e&&""!==e[a(218)]()&&(d+=a(186)+e+a(112)),i.innerHTML=d,t[a(394)][a(184)]("show")}function closeInfoModal($){let x=_0x5d99c9,e=document[x(190)]("infoModal");$&&$[x(118)]!==$.currentTarget||e[x(394)][x(129)](x(261))}function actualizarCarrito(){let $=_0x5d99c9,x=document[$(190)]($(429)),e=document[$(190)]($(366)),a=document[$(190)]($(220));x[$(406)]="";let t=carrito[$(402)]((x,e)=>x+e[$(300)],0);if(0===carrito[$(296)]){e&&(e[$(377)][$(332)]=$(349));let o=document[$(190)]($(247));o&&(o[$(394)][$(129)]($(413)),typeof cartExpanded!==$(365)&&(cartExpanded=!1))}else e&&(e[$(377)][$(332)]=$(373));a&&(a[$(201)]=t),carrito[$(362)]((e,a)=>{let t=$,o=document[t(304)]("li");o[t(377)][t(122)]=t(165),o[t(377)][t(157)]=t(120);let i=document[t(304)](t(426));i.innerHTML=t(315)+e[t(185)]+"</strong>&nbsp;<small>x"+e.cantidad+t(319);let d=document[t(304)](t(230));d[t(388)]=t(245),d[t(406)]=t(329),d[t(205)]=function(){eliminarItemCarrito(a)},o.appendChild(i),o[t(275)](d),x.appendChild(o)})}function eliminarItemCarrito($){let x=_0x5d99c9,e=carrito[$],a=document.querySelectorAll(x(302));a[x(362)]($=>{let a=x,t=$[a(347)]("h3")?.[a(201)];if(t===e[a(185)]){let o=$[a(347)](a(350)),i=$[a(347)](a(114))?.parentElement,d=$[a(347)](a(114));o&&i&&d&&(d[a(152)]="1",i[a(377)][a(332)]="none",i.style[a(291)]="0",i.style[a(203)]=a(125),o[a(377)][a(332)]="block",o.style[a(291)]="1",o[a(377)][a(203)]=a(355),o[a(377)][a(273)]="",o[a(377)][a(321)]="",o[a(377)].border="")}}),carrito[x(145)]($,1),actualizarCarrito(),guardarCarritoLocal()}function mostrarModalPedidoConfirmado($,x){let e=_0x5d99c9,a=document[e(190)](e(174));a&&a.remove();let t=document[e(304)](e(426));t.id=e(174),t[e(388)]=e(292),t[e(377)][e(332)]="flex",t[e(406)]=e(160),document[e(417)].appendChild(t),document[e(190)](e(107)).onclick=function(){let x=e;window[x(276)][x(179)]=x(172)+$}}function mostrarModalInfoPrimerArticulo(){let $=_0x5d99c9,x=document[$(190)]($(221));x&&x[$(129)]();let e=document[$(304)]($(426));e.id="info-primer-articulo-modal",e.className=$(292),e[$(377)][$(332)]=$(373),e[$(406)]=$(285),document[$(417)].appendChild(e),document[$(190)]($(290)).onclick=function(){e.remove()},e.onclick=function(x){let a=$;x[a(118)]===e&&e[a(129)]()}}function _0x1b61($,x){$-=107;let e=_0x49cd();return e[$]}function mostrarModalMinimoPedido($){let x=_0x5d99c9,e=document[x(190)](x(128));e&&e[x(129)]();let a=5-$,t=document[x(304)](x(426));t.id=x(128),t[x(388)]=x(292),t[x(377)][x(332)]=x(373),t.innerHTML=x(162)+$+x(297)+(1===$?x(313):x(393))+x(340)+(1===a?x(241):x(408))+x(282)+a+x(297)+(1===a?x(313):x(393))+' m\xe1s.\n                        </p>\n                    </div>\n                </div>\n                <button id="cerrarMinimoPedidoBtn" class="btn-primary" style="width:100%;margin:0;background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);">\n                    <i class="fas fa-check"></i> Entendido\n                </button>\n            </div>\n        </div>\n    ',document[x(417)].appendChild(t),document[x(190)](x(309))[x(205)]=function(){t.remove()},t[x(205)]=function($){$.target===t&&t[x(129)]()}}function limpiarCarrito(){let $=_0x5d99c9;carrito=[],document[$(337)](".card")[$(362)](x=>{let e=$,a=x.querySelector(e(350)),t=x.querySelector('input[type="number"]')?.parentElement,o=x[e(347)](e(114));a&&t&&o&&(o.value="1",t[e(377)][e(332)]=e(349),t[e(377)][e(291)]="0",t[e(377)].transform="scale(0.8)",a[e(377)].display=e(219),a[e(377)][e(291)]="1",a[e(377)].transform="scale(1)",a.style[e(273)]="",a[e(377)].color="",a[e(377)].border="")}),actualizarCarrito(),guardarCarritoLocal()}function calcularTotalCarrito(){return carrito.reduce(($,x)=>{let e=_0x1b61,a=parseFloat(x.precio[e(395)]()[e(259)](/[^0-9.-]/g,""));return $+a*x[e(300)]},0)}function enviarPedido(){let $=_0x5d99c9;if(0===carrito[$(296)]){alert($(314));return}let x=carrito.reduce((x,e)=>x+e[$(300)],0);if(x<5&&!modoEdicion){mostrarModalMinimoPedido(x);return}let e=calcularTotalCarrito();if(e<1e5&&!modoEdicion){alert("Error: Importe total insuficiente para procesar el pedido");return}if(modoEdicion){enviarPedidoFinal();return}let a=document.getElementById($(369));a&&(a[$(377)][$(332)]=$(373))}function enviarPedidoFinal(){let $=_0x5d99c9;if(modoEdicion&&pedidoEditId){let x=db[$(409)]("pedidos/"+pedidoEditId);x[$(345)]("value").then(x=>{let e=$;if(!x[e(208)]()){alert(e(171));return}let a=x[e(209)]();if(a[e(166)]){alert(e(266));return}carrito.forEach($=>{let x=e,t=a[x(193)][x(325)](x=>x.nombre===$.nombre);t>-1?a[x(193)][t][x(300)]+=$.cantidad:a[x(193)][x(363)]({nombre:$.nombre,cantidad:$[x(300)],valorUSD:$[x(270)],codigo:$.codigo||"",categoria:$[x(318)]||""})}),a[e(232)]={nombre:datosExtraCliente.nombre||a.cliente?.[e(185)]||"",telefono:datosExtraCliente[e(306)]||a[e(232)]?.[e(306)]||"",localidad:datosExtraCliente[e(161)]||a.cliente?.[e(161)]||"",direccion:datosExtraCliente[e(243)]||a[e(232)]?.[e(243)]||"",provincia:datosExtraCliente[e(256)]||a.cliente?.[e(256)]||"",dni:String(datosExtraCliente[e(327)]||a[e(232)]?.[e(327)]||""),email:datosExtraCliente[e(384)]||a.cliente?.[e(384)]||"",tipoCliente:datosExtraCliente[e(124)]||a.cliente?.[e(124)]||e(175)};let t={[e(258)+pedidoEditId+"/items"]:a.items,[e(258)+pedidoEditId+"/cliente"]:a[e(232)],["pedidos/"+pedidoEditId+e(178)]:!1,["pedidos/"+pedidoEditId+e(338)]:Date[e(361)]()};return db[e(409)]()[e(192)](t)})[$(236)](()=>{alert("\xa1Art\xedculos agregados exitosamente al pedido!"),setTimeout(()=>{window.location.replace(_0x1b61(172)+pedidoEditId)},300)})[$(431)](x=>{let e=$;console[e(279)](e(330),x),alert(e(410)+x[e(242)])});return}if(0===carrito.length){alert($(352));return}let e=datosExtraCliente[$(384)]||"";(function x(e){let a=$,t=e[a(351)](),o=clienteCache.get(t);return o&&Date.now()-o.timestamp<6e5?Promise[a(383)](o[a(208)]?{exists:()=>!0,val:()=>o[a(278)]}:{exists:()=>!1}):db[a(409)]("clientes").orderByChild(a(384))[a(316)](t)[a(294)](1)[a(345)](a(152))[a(236)]($=>{let x=a;return clienteCache[x(169)](t,{timestamp:Date[x(361)](),exists:$[x(208)](),data:$.exists()?$[x(209)]():null}),$})})(e)[$(236)](x=>{let a=$,t=db[a(409)](a(423))[a(363)](),o=t[a(269)],i={id:o,timestamp:Date[a(361)](),locked:!1,adminViewed:!1,createdby:a(428),status:"ABIERTO",cliente:{nombre:datosExtraCliente[a(185)]||"",telefono:datosExtraCliente[a(306)]||"",localidad:datosExtraCliente[a(161)]||"",direccion:datosExtraCliente[a(243)]||"",provincia:datosExtraCliente[a(256)]||"",dni:String(datosExtraCliente.dni||""),email:datosExtraCliente[a(384)]||"",tipoCliente:datosExtraCliente[a(124)]||a(175)},items:carrito.map($=>({nombre:$[a(185)],cantidad:$[a(300)],valorUSD:$[a(270)],codigo:$[a(416)]||"",categoria:$[a(318)]||""}))};return t[a(169)](i)[a(236)](()=>{let $=a;return!x[$(208)]()&&e?db[$(409)]($(289))[$(363)]({email:e[$(351)](),nombre:datosExtraCliente[$(185)]||"",telefono:datosExtraCliente.telefono||"",localidad:datosExtraCliente[$(161)]||"",direccion:datosExtraCliente[$(243)]||"",provincia:datosExtraCliente.provincia||"",dni:String(datosExtraCliente.dni||""),tipoCliente:datosExtraCliente[$(124)]||"mayorista",registro:$(428)}):Promise[$(383)]()})[a(236)](()=>o)})[$(236)](x=>{let e=$;datosExtraCliente[e(384)]&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/[e(249)](datosExtraCliente[e(384)])&&emailjs[e(430)](e(381),e(401),{email:datosExtraCliente[e(384)],name:datosExtraCliente[e(185)],linkPedido:e(177)+x})[e(236)](function($){let x=e;console[x(244)](x(133),$[x(354)],$[x(229)])},function($){let x=e;console[x(279)](x(342),$)}),mostrarModalPedidoConfirmado(x,datosExtraCliente.email),limpiarCarrito(),datosExtraCliente={}})[$(431)](x=>{let e=$;console[e(279)]("Error al guardar pedido o cliente:",x),alert(e(188)+x[e(242)])})}window[_0x5d99c9(364)](_0x5d99c9(341),()=>{if(void 0!==currentPage){let $=datosFiltrados.length>0?datosFiltrados:productos;actualizarPaginacion(currentPage,$)}}),document[_0x5d99c9(190)]("next-btn").addEventListener(_0x5d99c9(226),$=>{let x=_0x5d99c9;$[x(403)](),currentLightboxImages[x(296)]>0&&(currentImageIndex=(currentImageIndex+1)%currentLightboxImages[x(296)],document[x(190)](x(187))[x(271)]=currentLightboxImages[currentImageIndex])}),document[_0x5d99c9(190)]("prev-btn")[_0x5d99c9(364)](_0x5d99c9(226),$=>{let x=_0x5d99c9;$[x(403)](),currentLightboxImages[x(296)]>0&&(currentImageIndex=(currentLightboxImages.length+currentImageIndex-1)%currentLightboxImages[x(296)],document[x(190)](x(187))[x(271)]=currentLightboxImages[currentImageIndex])}),document[_0x5d99c9(190)](_0x5d99c9(187))[_0x5d99c9(364)](_0x5d99c9(279),function(){let $=_0x5d99c9;currentLightboxImages[$(296)]>0&&0!==currentImageIndex&&(currentImageIndex=0,this[$(271)]=currentLightboxImages[0])}),document[_0x5d99c9(364)](_0x5d99c9(110),function(){let $=_0x5d99c9;document[$(190)]($(391))[$(406)]=MARQUEE_TEXT,document.getElementById($(254))[$(406)]=MARQUEE_TEXT,cargarCarritoLocal()});const hamburgerBtn=document[_0x5d99c9(190)](_0x5d99c9(385)),hamburgerDropdown=document[_0x5d99c9(190)](_0x5d99c9(386));function _0x49cd(){let $=["show","carritoMayorista","borderLeft","<strong>Ahora $</strong> ","#2b6cb0","Este pedido est\xe1 cerrado y no se puede editar.","cssText","open","key","precio","src","50px","background",'<span style="color: #ffeb3b;">⚠ Pocas unidades</span>',"appendChild","location",'<span style="color: #ff9800;">✗ Sin stock</span>',"data","error","transition","662096ZsjlSI",' <strong style="color:#ff9800;font-size:1.2em;">',"Ver informaci\xf3n adicional"," unidades disponibles",'\n        <div class="modal-content" style="max-width:450px;position:relative;">\n            <div class="modal-header" style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);">\n                <h2 style=\'margin:0;\'><i class="fas fa-info-circle"></i> Informaci\xf3n Importante</h2>\n                <p style=\'margin:8px 0 0 0;\'>Sobre el proceso de pedido</p>\n            </div>\n            <div class="modal-body" style="padding:30px; text-align:center;">\n                <div style="background:#e3f2fd;border-radius:12px;padding:20px;margin-bottom:20px;">\n                    <i class="fas fa-truck" style="font-size:3em;color:#2196F3;margin-bottom:15px;"></i>\n                    <p style="margin:0;color:#333;line-height:1.8;font-size:1.05em;">\n                        <strong>La solicitud de pedido se utiliza solo para env\xedos.</strong>\n                    </p>\n                    <p style="margin:15px 0 0 0;color:#555;line-height:1.6;font-size:0.95em;">\n                        Si retir\xe1s en nuestro showroom, <strong>no hace falta generar un pedido</strong>.\n                    </p>\n                </div>\n                <button id="cerrarInfoPrimerArticuloBtn" class="btn-primary" style="width:100%;margin:0;background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);">\n                    <i class="fas fa-check"></i> Entendido\n                </button>\n            </div>\n        </div>\n    ',"onerror","categorias","getItem","clientes","cerrarInfoPrimerArticuloBtn","opacity","modal","card","limitToFirst","all 0.3s ease","length","</strong> ","#error","pagination-button","cantidad","Anterior",".card","Error al buscar el pedido. Por favor, intenta de nuevo","createElement","pedido","telefono","575126RGFJzg","16px","cerrarMinimoPedidoBtn","orderByChild","#fff","100px","unidad","El carrito est\xe1 vac\xedo. Agrega productos antes de continuar.","\n            <strong>","equalTo","Error al acceder a la API: ","categoria","</small>\n        ","fontSize","color","#fee","success","API_KEY","findIndex","Error al guardar carrito en localStorage:","dni","no-disponible.png",'<i class="fas fa-times"></i>',"Error al actualizar pedido:","timestamp","display","ceil","translateX(","map","No se encontraron pedidos registrados con este email","querySelectorAll","/lastUpdated","M\xe1ximo ",' en tu carrito.\n                        </p>\n                        <p style="margin:10px 0 0 0;color:#666;font-size:0.95em;">\n                            Te ',"resize","Error enviando email:","mousedown","input","once","loadingOverlay","querySelector","5px","none",".btn-agregar-carrito","toLowerCase","El carrito est\xe1 vac\xedo.","#cccccc","status","scale(1)","alignItems","1px solid #ff9800","1463517jdoxen","4px solid #e53e3e","documentElement","now","forEach","push","addEventListener","undefined","cartFloatBtn","/values/","title","clienteModal","loading","auto","infoModal","flex","515142AuKEZZ","catalogo","base","style","not-allowed","backgroundColor","0.7","service_lu9cpxk","21645NQluMW","resolve","email","hamburgerBtn","hamburgerDropdown","scrollTo","className","No se encontraron datos en la hoja.","activeElement","marquee-text-1","info","unidades","classList","toString","smooth","2346800fTKsJk","54px","</s></span>","focus","template_xqo1j5z","reduce","stopPropagation","includes","buscarSpinner","innerHTML","4px solid #48bb78","faltan","ref","Error al actualizar el pedido: ","1px solid #ddd","4px solid #4299e1","active","inline","#4CAF50","codigo","body","Stock insuficiente. Solo hay ","buscar","removeItem","width","closeUltimoPedidoModal","pedidos","lazy","center","div","#e6ffed","web","cart-list","send","catch","height","verPedidoBtnConfirmado","\uD83D\uDCB2&nbsp; Los valores publicados se encuentran ligados a la cotizaci\xf3n del d\xf3lar del d\xeda &nbsp; \uD83D\uDED2\uD83D\uDECD️ &nbsp; Visita nuestro Showroom y compr\xe1 sin requisitos minimos de compra &nbsp; \uD83D\uDE9A &nbsp; ENV\xcdOS A TODO EL PA\xcdS","change","DOMContentLoaded","split","</p>\n            </div>\n        ","carousel-pie-images",'input[type="number"]',"min","182mZjXUL","pagination","target","sort","35px","offsetWidth","position","Enter","tipoCliente","scale(0.8)","border","type","minimo-pedido-modal","remove","indexOf","entries","scrollTop","Email enviado!","1px solid #4CAF50","?key=","#ff9800","C\xf3digo: ","get","match","Datos del pedido existente cargados:","_blank","Sin stock disponible","fas fa-check-circle","Este producto no tiene stock disponible.","splice","keydown","top","hidden",'<span style="color: #4CAF50;">✓ Disponible</span>',"ultimoPedidoEmailInput","ultimoPedidoMensaje","value","currentTarget","slice","json",'<i class="fas fa-cart-plus"></i>',"paddingRight","RANGO","innerWidth",'\n        <div class="modal-content" style="max-width:450px;position:relative;">\n            <div class="modal-header">\n                <h2 style=\'margin:0;\'><i class="fas fa-check-circle"></i> \xa1Pedido Confirmado!</h2>\n                <p style=\'margin:8px 0 0 0;\'>Tu pedido se ha procesado exitosamente</p>\n            </div>\n            <div class="modal-body" style="padding:30px; text-align:center;">\n                <div style="background:#f0f9f0;border-radius:12px;padding:20px;margin-bottom:20px;">\n                    <i class="fas fa-envelope" style="font-size:3em;color:#4CAF50;margin-bottom:15px;"></i>\n                    <p style="margin:0;color:#333;line-height:1.6;">\n                        Se envi\xf3 una notificaci\xf3n a tu email con todos los detalles del pedido. \n                        Puedes verlo, modificarlo o realizar el seguimiento desde all\xed.\n                    </p>\n                </div>\n                <button id="verPedidoBtnConfirmado" class="btn-primary" style="width:100%;margin:0;">\n                    <i class="fas fa-eye"></i> Ver Mi Pedido\n                </button>\n            </div>\n        </div>\n    ',"localidad",'\n        <div class="modal-content" style="max-width:450px;position:relative;">\n            <div class="modal-header" style="background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);">\n                <h2 style=\'margin:0;\'><i class="fas fa-info-circle"></i> Pedido M\xednimo Requerido</h2>\n                <p style=\'margin:8px 0 0 0;\'>Para procesar tu pedido necesitamos un m\xednimo de unidades</p>\n            </div>\n            <div class="modal-body" style="padding:30px; text-align:center;">\n                <div style="background:#fff3e0;border-radius:12px;padding:20px;margin-bottom:20px;">\n                    <i class="fas fa-shopping-cart" style="font-size:3em;color:#ff9800;margin-bottom:15px;"></i>\n                    <p style="margin:0;color:#333;line-height:1.8;font-size:1.05em;">\n                        <strong>Necesitas agregar al menos 5 unidades para procesar el pedido.</strong>\n                    </p>\n                    <div style="margin-top:20px;padding:15px;background:#fff;border-radius:8px;border-left:4px solid #ff9800;">\n                        <p style="margin:0;color:#666;font-size:0.95em;">\n                            Actualmente tienes <strong style="color:#ff9800;font-size:1.2em;">',"next-btn","padding","relative","locked","lightbox","SPREADSHEET_ID","set","2px","Error: No se encontr\xf3 el pedido original","pedidos.html?id=",'<i class="fas fa-info"></i>',"pedido-confirmado-modal","mayorista","marginTop","https://www.home-point.com.ar/pedidos.html?id=","/adminViewed","href",".fas","apply","pageYOffset","bold","add","nombre",'\n            <div class="info-modal-section">\n                <h4>Tama\xf1o</h4>\n                <p>',"lightbox-img","Error al guardar el pedido: ","gap","getElementById","parse","update","items","todos","5px 10px","infoModalTitle","filtroDisponibles","find",'input[type="hidden"]','<span style="font-size:0.93em;"><strong>Antes $</strong> <s style="color: #e61919;">',"textContent",".stock-info","transform","localeCompare","onclick","close","\xa1Pedido encontrado! Redirigiendo...","exists","val","stock-info","floor","borderColor",".carousel-slide","option","prev-btn",'\n            <div class="info-modal-section">\n                <h4>Especificaciones del Fabricante:</h4>\n                <p>',"contains","trim","block","cartBadge","info-primer-articulo-modal","vcbQsbE2bgLwFAnDr","getBoundingClientRect","\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      z-index: 3001;\n      background: #fff7c2;\n      padding: 10px 0;\n      text-align: center;\n      font-weight: bold;\n      font-size: 1.1em;\n      box-shadow: 0 2px 8px #0002;\n      border-bottom: 2px solid #ffe066;\n    ","https://sheets.googleapis.com/v4/spreadsheets/","click","4px","toggle","text","button","preventDefault","cliente","delete","176028SeXkVG","checked","then","pointer","https://api.whatsapp.com/send/?phone=5491121891006","cursor","infoModalBody","falta","message","direccion","log","cart-item-delete","#e6f7ff","cartContainer"," unidades disponibles.","test","disabled","marginBottom","filter","max","marquee-text-2","164XJvpSt","provincia","from","pedidos/","replace","borderRadius"];return(_0x49cd=function(){return $})()}hamburgerBtn.addEventListener(_0x5d99c9(226),function($){let x=_0x5d99c9;$[x(403)](),hamburgerDropdown.classList[x(228)](x(413))}),document[_0x5d99c9(364)](_0x5d99c9(226),function($){let x=_0x5d99c9;hamburgerBtn.contains($.target)||hamburgerDropdown[x(217)]($[x(118)])||hamburgerDropdown[x(394)][x(129)](x(413))}),document[_0x5d99c9(337)](".hamburger-dropdown-item")[_0x5d99c9(362)]($=>{let x=_0x5d99c9;$[x(364)](x(226),function(){hamburgerDropdown[x(394)].remove("active")})});const ultimoPedidoBtn=document[_0x5d99c9(190)]("ultimoPedidoBtn"),ultimoPedidoModal=document.getElementById("ultimoPedidoModal"),closeUltimoPedidoModal=document[_0x5d99c9(190)](_0x5d99c9(422)),buscarUltimoPedidoBtn=document[_0x5d99c9(190)]("buscarUltimoPedidoBtn"),ultimoPedidoEmailInput=document[_0x5d99c9(190)](_0x5d99c9(150)),buscarBtnText=document[_0x5d99c9(190)]("buscarBtnText"),buscarSpinner=document[_0x5d99c9(190)](_0x5d99c9(405)),ultimoPedidoMensaje=document[_0x5d99c9(190)](_0x5d99c9(151));function mostrarMensajeBusqueda($,x){let e=_0x5d99c9,a=ultimoPedidoMensaje,t=a[e(347)](e(180)),o=a[e(347)]("span");$===e(279)?(a[e(377)].backgroundColor=e(322),a[e(377)].borderLeft=e(359),a[e(377)][e(321)]="#c53030",t.className="fas fa-exclamation-circle"):$===e(323)?(a.style[e(379)]=e(427),a[e(377)][e(263)]=e(407),a[e(377)].color="#2f855a",t[e(388)]=e(143)):$===e(392)&&(a[e(377)][e(379)]=e(246),a[e(377)].borderLeft=e(412),a[e(377)][e(321)]=e(265),t[e(388)]="fas fa-info-circle"),o[e(201)]=x,a[e(377)].display="flex",a[e(377)].alignItems=e(425)}function ocultarMensajeBusqueda(){let $=_0x5d99c9;ultimoPedidoMensaje[$(377)][$(332)]=$(349)}function setEstadoCargaBusqueda($){let x=_0x5d99c9;buscarUltimoPedidoBtn[x(250)]=$,buscarUltimoPedidoBtn[x(377)][x(291)]=$?x(380):"1",buscarUltimoPedidoBtn.style[x(239)]=$?x(378):"pointer",buscarBtnText[x(377)].display=$?"none":x(414),buscarSpinner[x(377)][x(332)]=$?x(219):"none",ultimoPedidoEmailInput.disabled=$}ultimoPedidoBtn[_0x5d99c9(364)](_0x5d99c9(226),function(){let $=_0x5d99c9;ultimoPedidoModal[$(377)][$(332)]=$(373),ultimoPedidoEmailInput[$(152)]="",ocultarMensajeBusqueda(),setTimeout(()=>ultimoPedidoEmailInput[$(400)](),100)}),closeUltimoPedidoModal[_0x5d99c9(364)](_0x5d99c9(226),function(){let $=_0x5d99c9;ultimoPedidoModal[$(377)][$(332)]=$(349),ocultarMensajeBusqueda()}),ultimoPedidoModal[_0x5d99c9(364)](_0x5d99c9(343),function($){let x=_0x5d99c9;$.target===ultimoPedidoModal&&(ultimoPedidoModal.style[x(332)]=x(349),ocultarMensajeBusqueda())}),buscarUltimoPedidoBtn[_0x5d99c9(364)](_0x5d99c9(226),function(){let $=_0x5d99c9,x=ultimoPedidoEmailInput.value[$(218)]().toLowerCase();if(ocultarMensajeBusqueda(),!x||!/^[^@\s]+@[^@\s]+\.[^@\s]+$/[$(249)](x)){mostrarMensajeBusqueda($(279),"Por favor, ingres\xe1 un email v\xe1lido"),ultimoPedidoEmailInput[$(400)]();return}setEstadoCargaBusqueda(!0),(function x(e){let a=$,t="ultimo_pedido_"+e,o=pedidosAbiertoCache[a(138)](t);return o&&Date[a(361)]()-o[a(331)]<6e5?Promise[a(383)](o[a(278)]):db[a(409)](a(423))[a(310)]("cliente/email")[a(316)](e).once(a(152))[a(236)]($=>(pedidosAbiertoCache.set(t,{timestamp:Date[a(361)](),data:$}),$))})(x)[$(236)](x=>{let e=$;if(setEstadoCargaBusqueda(!1),!x.exists()){mostrarMensajeBusqueda("error","No se encontraron pedidos registrados con este email");return}let a=null;x[e(362)]($=>{let x=$.val();(!a||x.timestamp>a[e(331)])&&(a=x)}),a&&a.id?(mostrarMensajeBusqueda(e(323),e(207)),setTimeout(()=>{let $=e;window[$(268)]("pedidos.html?id="+a.id,$(141)),ultimoPedidoModal[$(377)][$(332)]=$(349),ocultarMensajeBusqueda(),ultimoPedidoEmailInput.value=""},800)):mostrarMensajeBusqueda(e(279),e(336))}).catch(()=>{let x=$;setEstadoCargaBusqueda(!1),mostrarMensajeBusqueda(x(279),x(303))})});let searchDebounceTimer;const SEARCH_DEBOUNCE_DELAY=300;function debounceSearch($,x){return function(...e){let a=_0x1b61;clearTimeout(searchDebounceTimer),searchDebounceTimer=setTimeout(()=>$[a(181)](this,e),x)}}const debouncedBuscarPedido=debounceSearch(function(){buscarUltimoPedidoBtn[_0x5d99c9(226)]()},300);ultimoPedidoEmailInput[_0x5d99c9(364)](_0x5d99c9(146),function($){let x=_0x5d99c9;$[x(269)]===x(123)&&($[x(231)](),debouncedBuscarPedido())}),ultimoPedidoEmailInput[_0x5d99c9(364)](_0x5d99c9(344),function(){"none"!==ultimoPedidoMensaje.style[_0x5d99c9(332)]&&ocultarMensajeBusqueda()}),document.addEventListener(_0x5d99c9(110),function(){let $=_0x5d99c9,x=document[$(190)]($(113));if(x){let e=x[$(337)]($(213)),a=0;e.length>0&&setInterval(()=>{a=(a+1)%e[$(296)],function e(){let t=$,o=-(100*a);x[t(377)][t(203)]="translateX("+o+"%)"}()},5e3)}});
